{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,uCAKA,MAAMC,EAAcC,SAASC,iBAAiB,gBACxCC,EAAiBF,SAASG,cAAc,oBACxCC,EAAeJ,SAASG,cAAc,kBACtCE,EAAaL,SAASG,cAAc,eAEpCG,EAAaP,EAAY,GACzBQ,EAAYR,EAAY,GAY9B,IAAIS,EAEJ,SAASC,EAAaC,GACpBA,EAAMC,iBACN,MAAMC,EAAeF,EAAMG,OAAOC,SAASC,OAAOC,MAElDZ,EAAaa,UAAY,sBACzBf,EAAee,UAAY,GAC3B,MAAMC,GAAoB,EAAArB,EAAAsB,uBAE1B,EAAAC,EAAAC,sBAAqBT,GAClBU,MAAKC,IACJf,EAAgBe,EAChBnB,EAAaa,UAAY,YACzBf,EAAee,UAAY,GAC3Bf,EAAesB,WAAY,EAAAC,EAAAC,iBACzBH,EAAKI,MAAM,EAAGT,KAEhBb,EAAWY,WAAY,EAAAW,EAAAC,kBACrBN,EAAKO,OACLZ,EACA,GAEFa,GAAA,IAEDC,OAAOC,IACN7B,EAAaa,UAAYgB,EACzB/B,EAAee,WAAY,EAAAQ,EAAAS,iBAAa,GAE9C,CAEA,SAASC,EAAWC,GAClB,MAAMC,EAAOC,OAAOF,EAAEvB,OAAO0B,QAAQF,MAC/BnB,GAAoB,EAAArB,EAAAsB,sBACpBI,EAAOf,EACPgC,EAAMH,EAAOnB,EACbuB,EAAQD,EAAMtB,EACpBhB,EAAee,UAAY,GAC3Bf,EAAesB,WAAW,EAAAC,EAAAC,iBAAgBH,EAAKI,MAAMc,EAAOD,KAC5DnC,EAAWY,WAAY,EAAAW,EAAAC,kBAAiBN,EAAKO,OAAQZ,EAAmBmB,GACxEN,GACF,CAEA,SAASA,IACP,MAAMW,EAAe1C,SAASC,iBAAiB,uBAC/C,IAAK,MAAM0C,KAAMD,EACXC,EAAGC,UAAUC,SAAS,aAC1BF,EAAGG,iBAAiB,QAASX,EAGjC,CA5DA7B,EAAWwC,iBAAiB,SAAUrC,GACtCF,EAAUuC,iBAAiB,SAAUrC,GAErCH,EAAWwC,iBAAiB,SAAS,KACnCvC,EAAUO,SAASC,OAAOC,MAAQV,EAAWQ,SAASC,OAAOC,KAAK,IAGpET,EAAUuC,iBAAiB,SAAS,KAClCxC,EAAWQ,SAASC,OAAOC,MAAQT,EAAUO,SAASC,OAAOC,KAAK,G","sources":["src/js/search.js"],"sourcesContent":["import { calculateCocktails } from './calculate';\nimport { fetchCocktailsByName } from './fetch-cocktails';\nimport { getDrinksMarkup, getErrorMarkup } from './get-drinks-markup';\nimport { createPagination } from './pagination';\n\nconst searchForms = document.querySelectorAll('.search-form');\nconst contentResults = document.querySelector('#content-results');\nconst contentTitle = document.querySelector('#content-title');\nconst pagination = document.querySelector('#pagination');\n\nconst mainSearch = searchForms[0];\nconst mobSearch = searchForms[1];\n\nmainSearch.addEventListener('submit', getCocktails);\nmobSearch.addEventListener('submit', getCocktails);\n\nmainSearch.addEventListener('input', () => {\n  mobSearch.elements.search.value = mainSearch.elements.search.value;\n});\n\nmobSearch.addEventListener('input', () => {\n  mainSearch.elements.search.value = mobSearch.elements.search.value;\n});\nlet searchResults;\n\nfunction getCocktails(event) {\n  event.preventDefault();\n  const cocktailName = event.target.elements.search.value;\n\n  contentTitle.innerHTML = 'Searching results..';\n  contentResults.innerHTML = '';\n  const numberOfCocktails = calculateCocktails();\n\n  fetchCocktailsByName(cocktailName)\n    .then(data => {\n      searchResults = data;\n      contentTitle.innerHTML = 'Cocktails';\n      contentResults.innerHTML = \"\";\n      contentResults.append ( ...getDrinksMarkup(\n        data.slice(0, numberOfCocktails)\n      ));\n      pagination.innerHTML = createPagination(\n        data.length,\n        numberOfCocktails,\n        1\n      );\n      addPaginationListeners();\n    })\n    .catch((error) => {\n      contentTitle.innerHTML = error\n      contentResults.innerHTML = getErrorMarkup()\n    });\n}\n\nfunction changePage(e) {\n  const page = Number(e.target.dataset.page);\n  const numberOfCocktails = calculateCocktails();\n  const data = searchResults;\n  const end = page * numberOfCocktails;\n  const start = end - numberOfCocktails;\n  contentResults.innerHTML = '';\n  contentResults.append (...getDrinksMarkup(data.slice(start, end)));\n  pagination.innerHTML = createPagination(data.length, numberOfCocktails, page);\n  addPaginationListeners();\n}\n\nfunction addPaginationListeners() {\n  const pageElements = document.querySelectorAll('.pagination__number');\n  for (const el of pageElements) {\n    if (el.className.includes('inactive')) continue;\n    el.addEventListener('click', changePage);\n  }\n\n}\n"],"names":["$80k9Z","parcelRequire","$d35904b1c7f1c41e$var$searchForms","document","querySelectorAll","$d35904b1c7f1c41e$var$contentResults","querySelector","$d35904b1c7f1c41e$var$contentTitle","$d35904b1c7f1c41e$var$pagination","$d35904b1c7f1c41e$var$mainSearch","$d35904b1c7f1c41e$var$mobSearch","$d35904b1c7f1c41e$var$searchResults","$d35904b1c7f1c41e$var$getCocktails","event","preventDefault","cocktailName","target","elements","search","value","innerHTML","numberOfCocktails","calculateCocktails","$g0jhG","fetchCocktailsByName","then","data","append","$kE9Qy","getDrinksMarkup","slice","$jcFG7","createPagination","length","$d35904b1c7f1c41e$var$addPaginationListeners","catch","error","getErrorMarkup","$d35904b1c7f1c41e$var$changePage","e","page","Number","dataset","end","start","pageElements","el","className","includes","addEventListener"],"version":3,"file":"index.601e9562.js.map"}
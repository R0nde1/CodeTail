{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BCAO,SAASC,EAAiBC,EAAcC,EAAUC,GACvD,MAAMC,EAAaC,KAAKC,KAAKL,EAAeC,GAC5C,GAAmB,IAAfE,EACF,MAAO,GAET,IAAIG,EAA0B,IAAfJ,EAAmB,YAAc,GAC5CK,EAAS,2CAA2CD,iBACtDJ,EAAa,eAEf,IAAK,IAAIM,EAAI,EAAGA,GAAKL,EAAYK,IAAK,CAEpCD,GAAU,gCADKC,IAAMN,EAAa,YAAc,kBACgBM,MAAMA,QACxE,CAKA,OAJAF,EAAWJ,IAAeC,EAAa,YAAc,GACrDI,GAAU,4CAA4CD,iBACpDJ,EAAa,eAERK,CACT,CDbA,MAAME,EAAcC,SAASC,iBAAiB,gBACxCC,EAAiBF,SAASG,cAAc,oBACxCC,EAAeJ,SAASG,cAAc,kBACtCE,EAAaL,SAASG,cAAc,eAEpCG,EAAaP,EAAY,GACzBQ,EAAYR,EAAY,GAY9B,IAAIS,EAEJ,SAASC,EAAaC,GACpBA,EAAMC,iBACN,MAAMC,EAAeF,EAAMG,OAAOC,SAASC,OAAOC,MAElDZ,EAAaa,UAAY,sBACzBf,EAAee,UAAY,GAC3B,MAAMC,GAAoB,EAAA/B,EAAAgC,uBAE1B,EAAAC,EAAAC,sBAAqBT,GAClBU,MAAKC,IACJf,EAAgBe,EAChBnB,EAAaa,UAAY,YACzBf,EAAee,WAAY,EAAAO,EAAAC,iBACzBF,EAAKG,MAAM,EAAGR,IAEhBb,EAAWY,UAAY5B,EACrBkC,EAAKI,OACLT,EACA,GAEFU,GAAA,IAEDC,OAAOC,IACN1B,EAAaa,UAAYa,EACzB5B,EAAee,WAAY,EAAAO,EAAAO,iBAAa,GAE9C,CAEA,SAASC,EAAWC,GAClB,MAAMC,EAAOC,OAAOF,EAAEpB,OAAOuB,QAAQF,MAC/BhB,GAAoB,EAAA/B,EAAAgC,sBACpBI,EAAOf,EACP6B,EAAMH,EAAOhB,EACboB,EAAQD,EAAMnB,EAEpBhB,EAAee,WAAY,EAAAO,EAAAC,iBAAgBF,EAAKG,MAAMY,EAAOD,IAC7DhC,EAAWY,UAAY5B,EAAiBkC,EAAKI,OAAQT,EAAmBgB,GACxEN,GACF,CAEA,SAASA,IACP,MAAMW,EAAevC,SAASC,iBAAiB,uBAC/C,IAAK,MAAMuC,KAAMD,EACXC,EAAGC,UAAUC,SAAS,aAC1BF,EAAGG,iBAAiB,QAASX,EAGjC,CA3DA1B,EAAWqC,iBAAiB,SAAUlC,GACtCF,EAAUoC,iBAAiB,SAAUlC,GAErCH,EAAWqC,iBAAiB,SAAS,KACnCpC,EAAUO,SAASC,OAAOC,MAAQV,EAAWQ,SAASC,OAAOC,KAAK,IAGpET,EAAUoC,iBAAiB,SAAS,KAClCrC,EAAWQ,SAASC,OAAOC,MAAQT,EAAUO,SAASC,OAAOC,KAAK","sources":["src/js/search.js","src/js/pagination.js"],"sourcesContent":["import { calculateCocktails } from './calculate';\nimport { fetchCocktailsByName } from './fetch-cocktails';\nimport { getDrinksMarkup, getErrorMarkup } from './get-drinks-markup';\nimport { createPagination } from './pagination';\n\nconst searchForms = document.querySelectorAll('.search-form');\nconst contentResults = document.querySelector('#content-results');\nconst contentTitle = document.querySelector('#content-title');\nconst pagination = document.querySelector('#pagination');\n\nconst mainSearch = searchForms[0];\nconst mobSearch = searchForms[1];\n\nmainSearch.addEventListener('submit', getCocktails);\nmobSearch.addEventListener('submit', getCocktails);\n\nmainSearch.addEventListener('input', () => {\n  mobSearch.elements.search.value = mainSearch.elements.search.value;\n});\n\nmobSearch.addEventListener('input', () => {\n  mainSearch.elements.search.value = mobSearch.elements.search.value;\n});\nlet searchResults;\n\nfunction getCocktails(event) {\n  event.preventDefault();\n  const cocktailName = event.target.elements.search.value;\n\n  contentTitle.innerHTML = 'Searching results..';\n  contentResults.innerHTML = '';\n  const numberOfCocktails = calculateCocktails();\n\n  fetchCocktailsByName(cocktailName)\n    .then(data => {\n      searchResults = data;\n      contentTitle.innerHTML = 'Cocktails';\n      contentResults.innerHTML = getDrinksMarkup(\n        data.slice(0, numberOfCocktails)\n      );\n      pagination.innerHTML = createPagination(\n        data.length,\n        numberOfCocktails,\n        1\n      );\n      addPaginationListeners();\n    })\n    .catch((error) => {\n      contentTitle.innerHTML = error\n      contentResults.innerHTML = getErrorMarkup()\n    });\n}\n\nfunction changePage(e) {\n  const page = Number(e.target.dataset.page);\n  const numberOfCocktails = calculateCocktails();\n  const data = searchResults;\n  const end = page * numberOfCocktails;\n  const start = end - numberOfCocktails;\n\n  contentResults.innerHTML = getDrinksMarkup(data.slice(start, end));\n  pagination.innerHTML = createPagination(data.length, numberOfCocktails, page);\n  addPaginationListeners();\n}\n\nfunction addPaginationListeners() {\n  const pageElements = document.querySelectorAll('.pagination__number');\n  for (const el of pageElements) {\n    if (el.className.includes('inactive')) continue;\n    el.addEventListener('click', changePage);\n  }\n\n}\n","export function createPagination(totalResults, pageSize, pageNumber) {\n  const pagesCount = Math.ceil(totalResults / pageSize);\n  if (pagesCount === 1) {\n    return '';\n  }\n  let inactive = pageNumber === 1 ? ' inactive' : '';\n  let result = `<li class=\"pagination__number left-arrow${inactive}\" data-page=\"${\n    pageNumber - 1\n  }\">&lt;</li>`;\n  for (let i = 1; i <= pagesCount; i++) {\n    const active = i === pageNumber ? ' inactive' : '';\n    result += `<li class=\"pagination__number${active}\" data-page=\"${i}\">${i}</li>`;\n  }\n  inactive = pageNumber === pagesCount ? ' inactive' : '';\n  result += `<li class=\"pagination__number right-arrow${inactive}\" data-page=\"${\n    pageNumber + 1\n  }\">&gt;</li>`;\n  return result;\n}\n"],"names":["$dFiq8","parcelRequire","$1bab9c519cfa82bc$export$7f3155e3cda021fd","totalResults","pageSize","pageNumber","pagesCount","Math","ceil","inactive","result","i","$b18fd23e9761f35d$var$searchForms","document","querySelectorAll","$b18fd23e9761f35d$var$contentResults","querySelector","$b18fd23e9761f35d$var$contentTitle","$b18fd23e9761f35d$var$pagination","$b18fd23e9761f35d$var$mainSearch","$b18fd23e9761f35d$var$mobSearch","$b18fd23e9761f35d$var$searchResults","$b18fd23e9761f35d$var$getCocktails","event","preventDefault","cocktailName","target","elements","search","value","innerHTML","numberOfCocktails","calculateCocktails","$cDqy2","fetchCocktailsByName","then","data","$7od7n","getDrinksMarkup","slice","length","$b18fd23e9761f35d$var$addPaginationListeners","catch","error","getErrorMarkup","$b18fd23e9761f35d$var$changePage","e","page","Number","dataset","end","start","pageElements","el","className","includes","addEventListener"],"version":3,"file":"index.a495d055.js.map"}